generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                    Int         @id @default(autoincrement())
  password              String
  createdAt             DateTime    @default(now())
  email                 String      @unique
  name                  String
  phoneNumber           String?
  roleId                Int?
  isActive              Boolean     @default(true)
  lastLoggedInOn        DateTime?
  requirePasswordReset  Boolean     @default(false)
  lastPasswordChangedOn DateTime    @default(now())
  role                  Role?       @relation(fields: [roleId], references: [id])
}

model Role {
  id              Int              @id @default(autoincrement())
  name            String           @unique
  createdAt       DateTime         @default(now())
  createdById     Int?
  isActive        Boolean          @default(false)
  lastUpdatedAt   DateTime?
  lastUpdatedById Int?
  permissions     RolePermission[]
  users           User[]
}

model Permission {
  id    Int              @id @default(autoincrement())
  name  String           @unique
  roles RolePermission[]
}

model RolePermission {
  id           Int        @id @default(autoincrement())
  roleId       Int
  permissionId Int
  permission   Permission @relation(fields: [permissionId], references: [id], onDelete: Cascade)
  role         Role       @relation(fields: [roleId], references: [id], onDelete: Cascade)

  @@unique([roleId, permissionId])
}



model CaseStudy {
  id        String             @id @default(uuid())
  slug      String             @unique
  createdAt DateTime           @default(now())
  updatedAt DateTime           @updatedAt
  sections  CaseStudySection[] @relation("CaseStudyToSections")

  @@map("CaseStudy")
}

model CaseStudySection {
  id          String                  @id @default(uuid())
  caseStudyId String
  order       Int
  type        SectionType
  data        Json
  createdAt   DateTime                @default(now())
  updatedAt   DateTime                @updatedAt
  caseStudy   CaseStudy               @relation("CaseStudyToSections", fields: [caseStudyId], references: [id], onDelete: Cascade)
  media       CaseStudySectionMedia[]

  @@index([caseStudyId])
}

/// This model maps exactly to your existing `SectionMedia` table
model CaseStudySectionMedia {
  id                 String           @id @default(uuid())
  caseStudySectionId String
  mimeType           String
  blob               Bytes
  section            CaseStudySection @relation(fields: [caseStudySectionId], references: [id], onDelete: Cascade)

  @@index([caseStudySectionId])
  @@map("SectionMedia")
}

model Newsletter {
  id            String              @id @default(uuid())
  title         String
  description   String
  date          DateTime
  category      NewsletterCategory
  createdAt     DateTime            @default(now())
  updatedAt     DateTime            @updatedAt
  imageBlob     Bytes
  imageMimeType String
  sections      NewsletterSection[] @relation("NewsletterToSections")

  @@index([date])
}

model NewsletterSection {
  id           String                   @id @default(uuid())
  newsletterId String
  order        Int
  type         SectionType
  data         Json
  createdAt    DateTime                 @default(now())
  updatedAt    DateTime                 @updatedAt
  newsletter   Newsletter               @relation("NewsletterToSections", fields: [newsletterId], references: [id], onDelete: Cascade)
  media        NewsletterSectionMedia[]

  @@index([newsletterId])
}

/// This will create a new table `NewsletterSectionMedia`
model NewsletterSectionMedia {
  id                  String            @id @default(uuid())
  newsletterSectionId String
  mimeType            String
  blob                Bytes
  section             NewsletterSection @relation(fields: [newsletterSectionId], references: [id], onDelete: Cascade)

  @@index([newsletterSectionId])
}

model SslStaff {
  id                   String          @id
  name                 String
  type                 String
  borrowerId           String
  email                String
  sslId                String
  nationalIdNumber     String
  nationalIdFront      String?
  nationalIdBack       String?
  kraPinNumber         String?
  kraPinPhoto          String?
  phoneNumber          String
  status               String          @default("Active")
  roleInSchool         String
  dateOfBirth          String
  address              String
  gender               String
  postalAddress        String?
  startDate            String
  insuredForCreditLife Boolean         @default(false)
  paymentThisMonth     Boolean         @default(false)
  terminationDate      String?
  educationLevel       String?
  sslEmail             String?
  secondaryRole        String?
  monthlyTarget        Float?
  creditLifeHelper     String?
  teamLeader           String?
  passportPhoto        String?
  sslLevel             String?
  sslArea              String?
  isActive             Boolean         @default(true)
  createdAt            DateTime        @default(now())
  lastUpdatedAt        DateTime        @updatedAt
  createdById          Int?
  lastUpdatedById      Int?
  dailyWorkPlans       DailyWorkPlan[]

  @@map("ssl_staff")
}

model DailyWorkPlan {
  id                       Int      @id @default(autoincrement())
  date                     DateTime
  plannedVisit             String
  actualGpsCoordinates     String?
  callsMadeDescription     String
  notes                    String?
  supervisorReview         String?
  status                   String   @default("Pending")
  sslStaffId               String
  createdAt                DateTime @default(now())
  lastUpdatedAt            DateTime @updatedAt
  createdById              Int?
  lastUpdatedById          Int?
  locationIsVerified       Boolean  @default(false)
  marketingOfficerComments String?
  pinnedLocation           String?
  region                   String?
  schoolName               String?
  taskOfTheDay             String?
  teamLeaderId             String?
  schoolId                 String?
  transportCost            Float?
  isVerified               Boolean  @default(false)
  verifiedOn               DateTime?
  verifiedBy               String?
  isPaid                   Boolean  @default(false)
  school                   School?  @relation(fields: [schoolId], references: [id])
  sslStaff                 SslStaff @relation(fields: [sslStaffId], references: [id], onDelete: Cascade)

  @@map("daily_work_plan")
}

model School {
  id                 String          @id
  name               String
  schoolId           String          @unique
  email              String?
  phoneNumber        String?
  address            String?
  postalAddress      String?
  county             String?
  region             String?
  schoolType         String?
  status             String          @default("Active")
  principalName      String?
  principalPhone     String?
  principalEmail     String?
  totalStudents      Int?
  totalTeachers      Int?
  registrationNumber String?
  establishmentDate  String?
  isActive           Boolean         @default(true)
  createdAt          DateTime        @default(now())
  lastUpdatedAt      DateTime        @updatedAt
  createdById        Int?
  lastUpdatedById    Int?
  locationPin        String?
  sslId              String?
  dailyWorkPlans     DailyWorkPlan[]

  @@map("schools")
}



model Borrower {
  id                          Int       @id @default(autoincrement())
  sheetId                     String?   @unique
  customerType                String?
  type                        String?
  name                        String?
  locationDescription         String?
  societyCertificate          String?
  yearFounded                 String?
  sslId                       String?
  locationPin                 String?
  historicalPaymentDetails    String?
  paymentMethod               String?
  bankName                    String?
  accountName                 String?
  accountNumber               String?
  primaryPhone                String?
  documentVerifyingAccount    String?
  managerVerification         String?
  status                      String?
  notes                       String?
  entityType                  String?
  registrationNumber          String?
  notesOnStatus               String?
  officialSearch              String?
  pelezaSearch                String?
  productsRequested           String?
  dataCollectionProgress      Float?
  initialContactNotes         String?
  kraPinPhoto                 String?
  kraPinNumber                String?
  createdAt                   DateTime? @default(now())
  createdBy                   String?
  howHeard                    String?
  monthYearCreated            String?
  moeCertified                String?
  moeCertificate              String?
  county                      String?
  cr12                        String?
  nationalIdNumber            String?
  nationalIdFront             String?
  nationalIdBack              String?
  dateOfBirth                 String?
  privateOrApbet              String?
  relatedCreditApplications   String?
  relatedHandoversGivingId    String?
  relatedHandoversReceivingId String?
  relatedCrbConsents          String?
  relatedCollaterals          String?
  relatedUsers                String?
  relatedReferrers            String?
  relatedCustomerCareCalls    String?
  relatedEscalations          String?
  relatedEnrollmentReports    String?
  relatedLoans                String?
  relatedDirPaymentSchedules  String?
  relatedCollateralsByLoanId  String?
  synced                      Boolean   @default(false)
  cbsClientId                 Int?
  cbsResourceId               Int?
}

model Director {
  id                   Int       @id @default(autoincrement())
  sheetId              String?   @unique
  borrowerId           String?
  name                 String?
  nationalIdNumber     String?
  kraPinNumber         String?
  phoneNumber          String?
  email                String?
  gender               String?
  roleInSchool         String?
  status               String?
  dateOfBirth          String?
  educationLevel       String?
  insuredForCreditLife String?
  address              String?
  postalAddress        String?
  nationalIdFront      String?
  nationalIdBack       String?
  kraPinPhoto          String?
  passportPhoto        String?
  createdAt            DateTime? @default(now())
  synced               Boolean   @default(false)
  type                 String?
}

model CrbConsent {
  id                 Int       @id @default(autoincrement())
  sheetId            String?   @unique
  borrowerId         String?
  agreement          String?
  signedByName       String?
  date               String?
  roleInOrganization String?
  signature          String?
  createdAt          DateTime? @default(now())
  synced             Boolean   @default(false)
}

model Referrer {
  id                 Int       @id @default(autoincrement())
  sheetId            String?   @unique
  schoolId           String?
  referrerName       String?
  mpesaNumber        String?
  referralRewardPaid String?
  datePaid           String?
  amountPaid         String?
  proofOfPayment     String?
  createdAt          DateTime? @default(now())
  synced             Boolean   @default(false)
}

model CreditApplication {
  id                              Int       @id @default(autoincrement())
  sheetId                         String?   @unique
  customerType                    String?
  borrowerId                      String?
  applicationStartDate            String?
  creditType                      String?
  workingCapitalApplicationNumber String?
  sslActionNeeded                 String?
  sslAction                       String?
  sslId                           String?
  sslFeedbackOnAction             String?
  schoolCrbAvailable              String?
  referredBy                      String?
  photoOfCheck                    String?
  status                          String?
  commentsOnChecks                String?
  createdAt                       DateTime? @default(now())
  synced                          Boolean   @default(false)
  totalAmountRequested            Float?
  currentCostOfCapital            Float?
  checksCollected                 Float?
  checksNeededForLoan             Float?
  finalAmountApprovedAndDisbursed Float?
}

model ActiveDebt {
  id                                 Int       @id @default(autoincrement())
  sheetId                            String?   @unique
  creditApplicationId                String?
  debtStatus                         String?
  listedOnCrb                        String?
  personalLoanOrSchoolLoan           String?
  lender                             String?
  dateLoanTaken                      String?
  finalDueDate                       String?
  totalLoanAmount                    Float?
  balance                            Float?
  amountOverdue                      Float?
  monthlyPayment                     Float?
  debtStatement                      String?
  annualDecliningBalanceInterestRate Float?
  isLoanCollateralized               String?
  typeOfCollateral                   String?
  whatWasLoanUsedFor                 String?
  createdAt                          DateTime? @default(now())
  synced                             Boolean   @default(false)
}

model FeePlan {
  id                  Int       @id @default(autoincrement())
  sheetId             String?   @unique
  creditApplicationId String?
  schoolYear          String?
  photo               String?
  file                String?
  createdAt           DateTime? @default(now())
  synced              Boolean   @default(false)
}

model Payroll {
  id                         Int       @id @default(autoincrement())
  sheetId                    String?   @unique
  creditApplicationId        String?
  role                       String?
  numberOfEmployeesInRole    Int?
  monthlySalary              Float?
  monthsPerYearTheRoleIsPaid Int?
  notes                      String?
  totalAnnualCost            Float?
  createdAt                  DateTime? @default(now())
  synced                     Boolean   @default(false)
}

model EnrollmentVerification {
  id                          Int       @id @default(autoincrement())
  sheetId                     String?   @unique
  creditApplicationId         String?
  subCountyEnrollmentReport   String?
  enrollmentReport            String?
  numberOfStudentsThisYear    Int?
  numberOfStudentsLastYear    Int?
  numberOfStudentsTwoYearsAgo Int?
  createdAt                   DateTime? @default(now())
  synced                      Boolean   @default(false)
}

model MpesaBankStatement {
  id                        Int       @id @default(autoincrement())
  sheetId                   String?   @unique
  creditApplicationId       String?
  personalOrBusinessAccount String?
  type                      String?
  accountDetails            String?
  description               String?
  statement                 String?
  statementStartDate        String?
  statementEndDate          String?
  totalRevenue              Float?
  convertedExcelFile        String?
  createdAt                 DateTime? @default(now())
  synced                    Boolean   @default(false)
}

model AuditedFinancial {
  id                  Int       @id @default(autoincrement())
  sheetId             String?   @unique
  creditApplicationId String?
  statementType       String?
  notes               String?
  file                String?
  createdAt           DateTime? @default(now())
  synced              Boolean   @default(false)
}

model StudentBreakdown {
  id                  Int       @id @default(autoincrement())
  sheetId             String?   @unique
  creditApplicationId String?
  feeType             String?
  term                String?
  grade               String?
  numberOfStudents    Int?
  fee                 Float?
  totalRevenue        Float?
  createdAt           DateTime? @default(now())
  synced              Boolean   @default(false)
}

model OtherSupportingDoc {
  id                  Int       @id @default(autoincrement())
  sheetId             String?   @unique
  creditApplicationId String?
  documentType        String?
  notes               String?
  file                String?
  image               String?
  createdAt           DateTime? @default(now())
  synced              Boolean   @default(false)
}

model InvestmentCommittee {
  id                                                              Int       @id @default(autoincrement())
  sheetId                                                         String?   @unique
  creditApplicationId                                             String?
  auditedFinancialsProvided                                       String?
  schoolHasBankAccountAndChecks                                   String?
  annualRevenueFromBankaAndMPesaStatements                        String?
  totalCashHeldInBankAndMPesaAccounts                             String?
  debtRatio                                                       String?
  loanLengthMonths                                                String?
  annualReducingInterestRate                                      String?
  totalEstimatedValueOfAssets                                     String?
  predictedDaysLate                                               Int?
  averageBankBalance                                              String?
  createdAt                                                       DateTime? @default(now())
  synced                                                          Boolean   @default(false)
  totalAnnualRevenueFromFeesFromStudentBreakdownUnadjusted        String?
  ageOfSchool                                                     String?
  annualDonationRevenue                                           String?
  annualFoodExpenseEstimateIncludingCookSalaries                  String?
  annualNonSchoolRevenueGenerated                                 String?
  annualProfitExcludingFoodAndTransportExpenses                   String?
  annualProfitIncludingFoodAndTransportExpenses                   String?
  annualSponsorshipRevenue                                        String?
  annualTransportExpenseEstimateIncludingDriverSalaries           String?
  assetValueHasIncreasedFromTwoYearsAgo                           String?
  averageBankBalanceTotalUnadjustedRevenue                        String?
  averageSchoolFeesCharged                                        String?
  collateralCoverageOfLoanAmountRequested                         String?
  collectionsRate                                                 String?
  currentDebtToIncome                                             String?
  growthInPopulation                                              String?
  incorporationStructure                                          String?
  lesserOfMonthlyProfitAnd35PercentProfitMargin                   String?
  maximumLoan                                                     String?
  maximumMonthlyPayment                                           String?
  maximumPreviousDaysLate                                         String?
  monthlyProfitIncludingAllExpenses                               String?
  numberOfInstallmentsPaidLate                                    String?
  numberOfStudentsFromEnrollmentVerification                      String?
  numberOfStudentsPreviousYear                                    String?
  previousLoansWithJackfruit                                      String?
  previousRestructure                                             String?
  profitMarginTotalProfitTotalRevenueNotAdjustedDownTo35Percent   String?
  schoolCreditRisk                                                String?
  schoolId                                                        String?
  schoolIsProfitable                                              String?
  schoolSitsOnOwnedLeasedOrRentedLand                             String?
  solvencyAssetsLiabilities                                       String?
  sslId                                                           String?
  totalAnnualDebtPaymentOfSchoolAndDirectors                      String?
  totalAnnualExpensesExcludingFoodAndTransport                    String?
  totalAnnualOwnersDraw                                           String?
  totalAnnualSpendingOnRent                                       String?
  totalAnnualSpendingOnSalariesExcludingCooksAndDrivers           String?
  totalBadDebtOnCrbHeldBySchoolAndDirectors                       String?
  totalDebt                                                       String?
  totalDebtOnCrbFullyPaidOffBySchoolAndDirectors                  String?
  totalOfSalariesRentDebtAndOwnersDraw                            String?
  typeOfSchool                                                    String?
  annualExpenseEstimateExcludingPayrollRentDebtOwnersDrawFoodAndT String?
  lesserOfAnnualRevenueFromBankaAndMPesaStatementsAnd75PercentCol String?
}

model VendorDisbursementDetail {
  id                              Int       @id @default(autoincrement())
  sheetId                         String?   @unique
  creditApplicationId             String?
  vendorPaymentMethod             String?
  phoneNumberForMPesaPayment      String?
  managerVerification             String?
  documentVerifyingPaymentAccount String?
  bankName                        String?
  accountName                     String?
  accountNumber                   String?
  phoneNumberForBankAccount       String?
  paybillNumberAndAccount         String?
  buyGoodsTill                    String?
  createdAt                       DateTime? @default(now())
  synced                          Boolean   @default(false)
}

model HomeVisit {
  id                             Int       @id @default(autoincrement())
  sheetId                        String?   @unique
  creditApplicationId            String?
  userId                         String?
  county                         String?
  addressDetails                 String?
  locationPin                    String?
  ownOrRent                      String?
  howManyYearsStayed             String?
  maritalStatus                  String?
  howManyChildren                String?
  isSpouseInvolvedInSchool       String?
  doesSpouseHaveOtherIncome      String?
  ifYesHowMuchPerMonth           String?
  isDirectorBehindOnUtilityBills String?
  totalNumberOfRooms             String?
  howIsNeighborhood              String?
  howAccessibleIsHouse           String?
  isDirectorHomeInSameCity       String?
  isDirectorTrainedEducator      String?
  doesDirectorHaveOtherBusiness  String?
  otherNotes                     String?
  createdAt                      DateTime? @default(now())
  synced                         Boolean   @default(false)
}

model AssetTitle {
  id                                Int       @id @default(autoincrement())
  sheetId                           String?   @unique
  creditApplicationId               String?
  type                              String?
  toBeUsedAsSecurity                String?
  description                       String?
  legalOwner                        String?
  userId                            String?
  fullOwnerDetails                  String?
  collateralOwnedByDirectorOfSchool String?
  plotNumber                        String?
  schoolSitsOnLand                  String?
  hasComprehensiveInsurance         String?
  originalInsuranceCoverage         String?
  initialEstimatedValue             String?
  approvedByLegalTeamOrNTSAAgent    String?
  notesOnApprovalForUse             String?
  evaluatorsMarketValue             String?
  evaluatorsForcedValue             String?
  moneyOwedOnAsset                  String?
  licensePlateNumber                String?
  engineCC                          String?
  yearOfManufacture                 String?
  logbookPhoto                      String?
  titleDeedPhoto                    String?
  fullTitleDeed                     String?
  evaluatorsReport                  String?
  createdAt                         DateTime? @default(now())
  synced                            Boolean   @default(false)
}

model ContractDetails {
  id                                     Int       @id @default(autoincrement())
  sheetId                                String?   @unique
  creditApplicationId                    String?
  loanLengthRequestedMonths              String?
  monthsSchoolRequestsForgiveness        String?
  disbursalDateRequested                 String?
  tenPercentDownOnVehicleOrLandFinancing String?
  createdBy                              String?
  createdAt                              DateTime? @default(now())
  synced                                 Boolean   @default(false)
}

model CreditApplicationComment {
  id                  Int       @id @default(autoincrement())
  sheetId             String?   @unique
  creditApplicationId String?
  commenterType       String?
  comments            String?
  commenterName       String?
  createdAt           DateTime? @default(now())
  synced              Boolean   @default(false)
}

model DirectPaymentSchedule {
  id                                             Int      @id @default(autoincrement())
  sheetId                                        String?  @unique
  borrowerId                                     String?
  dueDate                                        DateTime?
  amountDue                                      Float?
  amountPaid                                     Float?
  createdAt                                      String?
  synced                                         Boolean  @default(false)
  adjustedMonth                                  String?
  amountStillUnpaid                              String?
  borrowerType                                   String?
  checkCashingStatus                             String?
  creditLifeInsuranceFeeInsuranceExpense         String?
  creditLifeInsuranceFeePaymentsUtilized         String?
  creditLifeInsuranceFeesCharged                 String?
  creditLifeInsuranceFeesOwedToInsurer           String?
  dateFullyPaid                                  String?
  daysLate                                       Int?
  debtType                                       String?
  directLoanId                                   String?
  holidayForgiveness                             String?
  interestChargedWithoutForgiveness              String?
  interestRepaymentDue                           String?
  notesOnPayment                                 String?
  par14                                          String?
  par30                                          String?
  paymentOverdue                                 String?
  principalRepaymentDue                          String?
  principalRepaymentWithoutForgiveness           String?
  vehicleInsuranceFeesOwedToInsurer              String?
  vehicleInsurancePaymentDue                     String?
  vehicleInsurancePaymentDueWithoutForgiveness   String?
  vehicleInsurancePremiumDueWithForgiveness      String?
  vehicleInsurancePremiumDueWithoutForgiveness   String?
  vehicleInsuranceSurchargeDueWithForgiveness    String?
  vehicleInsuranceSurchargeDueWithoutForgiveness String?
  vehicleInsuranceFeesUtilized                   String?
  par60                                          String?
  par90                                          String?
  par120                                         String?
  sslId                                          String?
  dateToBankCheck                                String?
  loanCategory                                   String?
  writeOffDate                                   String?
  interestSuspended                              String?
  region                                         String?
  dateForMpesaBankTransfer                       String?
  createdBy                                      String?
}

model Loan {
  id                                                              Int      @id @default(autoincrement())
  sheetId                                                         String?  @unique
  loanType                                                        String?
  loanPurpose                                                     String?
  borrowerType                                                    String?
  borrowerId                                                      String?
  borrowerName                                                    String?
  principalAmount                                                 Float?
  interestType                                                    String?
  annualDecliningInterest                                         String?
  annualFlatInterest                                              String?
  processingFeePercentage                                         String?
  creditLifeInsurancePercentage                                   String?
  securitizationFee                                               String?
  processingFee                                                   String?
  creditLifeInsuranceFee                                          String?
  numberOfMonths                                                  Int?
  dailyPenalty                                                    String?
  amountToDisburse                                                String?
  totalComprehensiveVehicleInsurancePaymentsToPay                 String?
  totalInterestCharged                                            String?
  totalInterestToPay                                              String?
  totalPrincipalToPay                                             String?
  creditApplicationId                                             String?
  firstPaymentPeriod                                              String?
  createdBy                                                       String?
  totalLoanAmountPaidIncludingPenaltiesAndInsurance               String?
  totalPenaltiesAssessed                                          String?
  totalPenaltiesPaid                                              String?
  penaltiesStillDue                                               String?
  sslId                                                           String?
  loanOverdue                                                     String?
  par14                                                           String?
  par30                                                           String?
  par60                                                           String?
  par90                                                           String?
  par120                                                          String?
  amountOverdue                                                   String?
  loanFullyPaid                                                   String?
  loanStatus                                                      String?
  totalAmountDueToDate                                            String?
  amountDisbursedToDateIncludingFees                              String?
  balanceOfDisbursementsOwed                                      String?
  principalPaidToDate                                             String?
  outstandingPrincipalBalance                                     Float?
  numberOfAssetsUsedAsCollateral                                  String?
  numberOfAssetsRecorded                                          String?
  allCollateralRecorded                                           String?
  principalDifference                                             String?
  creditLifeInsuranceSubmitted                                    String?
  directorHasCompletedCreditLifeHealthExamination                 String?
  recordOfReceiptForCreditLifeInsurance                           String?
  percentDisbursed                                                String?
  daysLate                                                        Int?
  totalUnpaidLiability                                            String?
  restructured                                                    String?
  collateralCheckedByLegalTeam                                    String?
  hasFemaleDirector                                               Int?
  reportsGenerated                                                String?
  contractUploaded                                                String?
  percentChargeOnVehicleInsuranceFinancing                        String?
  customerCareCallDone                                            String?
  checksHeld                                                      String?
  remainingPeriodsForChecks                                       String?
  adequateChecksForRemainingPeriods                               String?
  totalLiabilityAmountFromContract                                String?
  liabilityCheck                                                  String?
  creditLifeInsurer                                               String?
  interestChargedVsDueDifference                                  String?
  principalDueWithForgivenessVsWithoutForgiveness                 String?
  insuranceDueWithVsWithoutForgiveness                            String?
  firstLoan                                                       String?
  additionalFeesWithheldFromDisbursement                          String?
  daysSinceCreation                                               String?
  referral                                                        String?
  numberOfInstallmentsOverdue                                     String?
  amountPaidTowardsOverdueInstallments                            String?
  borrowerIdForContracts                                          String?
  mostRecentInstallmentPartiallyPaid                              String?
  willingnessToPay                                                String?
  capabilityToPay                                                 String?
  loanRiskCategory                                                String?
  calculatedAmountToDisburse                                      String?
  differenceBetweenCalculatedAndRecordedDisbursement              String?
  teachers                                                        String?
  totalInterestPaid                                               String?
  outstandingInterestBalance                                      Float?
  totalVehicleInsuranceDue                                        String?
  totalVehicleInsurancePaid                                       String?
  outstandingVehicleInsuranceBalance                              String?
  reassigned                                                      String?
  flexiLoan                                                       String?
  loanQualifiesForCatalyzeProgram                                 String?
  allStaff                                                        String?
  loanHasGonePAR30                                                String?
  hasMaleDirector                                                 String?
  schoolArea                                                      String?
  firstDisbursement                                               DateTime?
  totalAdditionalFeesNotWithheldFromDisbursement                  String?
  additionalFeesNotWithheldFromDisbursementPaid                   String?
  additionalFeesNotWithheldFromDisbursementStillDue               String?
  averageSchoolFees                                               String?
  contractingDate                                                 String?
  submittedToCatalyze                                             String?
  mostRecentContract                                              String?
  mostRecentContractType                                          String?
  schoolType                                                      String?
  howManyClassroomsWillBeConstructedWithTheLoan                   String?
  howManyVehiclesWillBePurchasedWithTheLoan                       String?
  principalWrittenOff                                             String?
  interestWrittenOff                                              String?
  vehicleInsuranceWrittenOff                                      String?
  segmentedRepaymentView                                          String?
  beforeJan12024                                                  String?
  loanNumber                                                      String?
  teamLeader                                                      String?
  vehicleInsuranceWithoutForgivenessCheck                         String?
  vehicleInsuranceWithForgivenessCheck                            String?
  suspendedInterestCharged                                        String?
  suspendedInterestDue                                            String?
  region                                                          String?
  exciseDuty                                                      String?
  createdAt                                                       DateTime @default(now())
  synced                                                          Boolean  @default(false)
  totalLiabilityAmountIncludingPenaltiesAndComprehensiveVehicleInsurance String?
}

model FinancialSurvey {
  id                              Int       @id @default(autoincrement())
  sheetId                         String?   @unique
  creditApplicationId             String?
  surveyDate                      String?
  directorId                      String?
  schoolGrades                    String?
  isSchoolAPBETOrPrivate          String?
  isChurchSupported               String?
  churchName                      String?
  churchAnnualSupport             String?
  churchBenefits                  String?
  facilityOwnership               String?
  annualLeaseRent                 String?
  ownerAnnualWithdrawal           String?
  monthlyDebtPayments             String?
  providesMeals                   String?
  termlyFoodExpense               String?
  termlyFuelExpense               String?
  annualStudentTextbookExpense    String?
  annualTeacherTextbookExpense    String?
  termlyStationeryExpense         String?
  monthlyWifiExpense              String?
  termlyAirtimeExpense            String?
  monthlyWaterExpense             String?
  termlyMiscExpense               String?
  annualTaxLicenseExpense         String?
  monthlyElectricityExpense       String?
  hasVehicles                     String?
  termlyVehicleServiceExpense     String?
  termlyVehicleFuelExpense        String?
  totalVehiclePurchaseExpense     String?
  annualEquipmentFurnitureExpense String?
  annualRepairMaintenanceExpense  String?
  hasOtherRevenue                 String?
  otherRevenueSources             String?
  annualOtherRevenue              String?
  sponsoredChildrenCount          String?
  annualSponsorshipRevenue        String?
  lastYearAssetValue              String?
  lastYearLoanDeposits            String?
  previousYearStudentCount        String?
  leaseAgreement                  String?
  receivesSignificantDonations    String?
  annualDonationRevenue           String?
  majorProjectsAndMitigation      String?
  nextYearExpectedStudents        String?
  twoYearsAgoAssetValue           String?
  currentBankBalance              String?
  yearsAtCurrentPremises          String?
  yearsWithBankAccount            String?
  hasAuditedFinancials            String?
  branchCount                     String?
  hasMicrofinanceBorrowing        String?
  hasFormalBankBorrowing          String?
  createdAt                       DateTime? @default(now())
  synced                          Boolean   @default(false)
  annualExpenseEstimate           String?
  annualFoodExpenseEstimate       String?
  annualTransportExpenseEstimate  String?
  createdBy                       String?
}

enum SectionType {
  banner
  content
}

enum NewsletterCategory {
  IMPACT_STORIES
  SUCCESS_STORIES
  PARTNERSHIPS
  ALL_UPDATES
}

enum MessageType {
  GENERAL_INQUIRY
  SUPPORT_REQUEST
  PARTNERSHIP_INQUIRY
  FEEDBACK
  OTHER
}

enum Platform {
  WEBSITE
  MOBILE_APP
  API
  EMAIL
  PHONE
}

enum MessageStatus {
  NEW
  IN_PROGRESS
  RESOLVED
  CLOSED
}


model ContactMessage {
  id          String   @id @default(uuid())
  messageType String
  name        String
  email       String
  subject     String
  message     String
  platform    String
  status      String   @default("NEW")
  viewedBy    String?
  viewedAt    DateTime?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("ContactMessage")
}


model ProductCategory {
  id          Int       @id @default(autoincrement())
  name        String    @unique
  status      String    @default("Active")
  description String?
  imageUrl    String?
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
  suppliers   Supplier[]
  products    Product[]
  
  @@map("product_categories")
}

model Supplier {
  id           Int       @id @default(autoincrement())
  company      String    @unique
  contactPerson String
  email        String    @unique
  phone        String?
  logoUrl      String?
  categoryId   Int?
  category     ProductCategory? @relation(fields: [categoryId], references: [id], onDelete: SetNull)
  notes        String?
  status       String    @default("Active")
  createdAt    DateTime  @default(now())
  updatedAt    DateTime  @updatedAt
  products     Product[]
  
  @@map("suppliers")
}

model Product {
  id            Int       @id @default(autoincrement())
  name          String
  supplierId    Int?
  categoryId    Int?
  price         Float?
  stock         Int       @default(0)
  imageUrl      String?
  description   String?
  status        String    @default("Active")
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
  supplier      Supplier? @relation(fields: [supplierId], references: [id], onDelete: SetNull)
  category      ProductCategory? @relation(fields: [categoryId], references: [id], onDelete: SetNull)
  orderItems    SalesOrderItem[]
  
  @@map("products")
}

model SalesOrder {
  id              Int               @id @default(autoincrement())
  customerName    String
  customerEmail   String
  customerPhone   String
  totalAmount     Float
  status          String            @default("Pending")
  notes           String?
  createdAt       DateTime          @default(now())
  updatedAt       DateTime          @updatedAt
  orderItems      SalesOrderItem[]
  
  @@map("sales_orders")
}

model SalesOrderItem {
  id            Int         @id @default(autoincrement())
  orderId       Int
  productId     Int
  quantity      Int
  unitPrice     Float
  totalPrice    Float
  createdAt     DateTime    @default(now())
  updatedAt     DateTime    @updatedAt
  order         SalesOrder  @relation(fields: [orderId], references: [id], onDelete: Cascade)
  product       Product     @relation(fields: [productId], references: [id], onDelete: Cascade)
  
  @@map("sales_order_items")
}

model PrincipalTranche {
  id                                  Int       @id @default(autoincrement())
  sheetId                             String?   @unique
  directLoanId                        String?
  contractSigningDate                 String?
  amount                              Float?
  sslId                               String?
  initialDisbursementDateInContract   DateTime?
  dateTrancheHasGonePar30             String?
  createdAt                           DateTime? @default(now())
  createdBy                           String?
  hasFemaleDirector                   String?
  loanType                            String?
  reassigned                          String?
  teamLeader                          String?
  region                              String?
  synced                              Boolean   @default(false)
  
  @@map("principal_tranches")
}

model DirectLendingProcessing {
  id                                           Int       @id @default(autoincrement())
  sheetId                                      String?   @unique
  paymentType                                  String?
  paymentSource                                String?
  borrowerType                                 String?
  borrowerId                                   String?
  directLoanId                                 String?
  paymentScheduleId                            String?
  paymentDate                                  String?
  amountPaid                                   String?
  paymentReferenceOrTransactionCode            String?
  installmentPaymentAmount                     String?
  installmentVehicleInsurancePremiumAmount     String?
  installmentVehicleInsuranceSurchargeAmount   String?
  installmentInterestAmount                    String?
  installmentPrincipalAmount                   String?
  vehicleInsurancePremiumPaid                  String?
  vehicleInsuranceSurchargePaid                String?
  interestPaid                                 String?
  principalPaid                                String?
  createdBy                                    String?
  sslId                                        String?
  region                                       String?
  synced                                       Boolean   @default(false)
  createdAt                                    DateTime? @default(now())
  
  @@map("direct_lending_processing")
}

model ImpactSurvey {
  id                                                                                Int       @id @default(autoincrement())
  sheetId                                                                           String?   @unique
  creditApplicationId                                                               String?
  surveyDate                                                                        String?
  directorId                                                                        String?
  createdBy                                                                         String?
  isSchoolAPBETOrPrivate                                                            String?
  whatKindOfAreaIsTheSchoolIn                                                       String?
  whatGradeLevelsDoesTheSchoolServe                                                 String?
  howManyStudentsDoesTheSchoolHave                                                  String?
  whatPercentageOfChildrenTransitionedLastSchoolYearFromSecondarySchoolToTertiaryOrVocationalSchool String? @map("whatPercentageOfChildrenTransitionedLastSchoolYearFromSecondary")
  thePreviousSchoolYearWhatPercentageOfChildrenPassedTheKCSE                        String?
  howManyClassroomsDoesTheSchoolHave                                                String?
  howManyAdministrativeRoomsDoesTheSchoolHave                                       String?
  howManyTeachersDoesTheSchoolHave                                                  String?
  doesTheSchoolHaveADedicatedAssemblyHall                                           String?
  howManyPeopleCanTheAssemblyHallSit                                                String?
  doesTheSchoolHaveRunningWater                                                     String?
  describeTheRunningWaterFacilities                                                 String?
  isTherePurifiedDrinkingWaterAvailableToStudents                                   String?
  describeThePurifiedWaterFacilities                                                String?
  doesTheSchoolHaveElectricity                                                      String?
  describeTheElectricalSystem                                                       String?
  doesTheSchoolHaveFireExtinguishers                                                String?
  howManyFireExtinguishers                                                          String?
  doesTheSchoolProvideMeals                                                         String?
  doesTheSchoolHaveItsOwnKitchen                                                    String?
  whatCookingEquipmentDoesTheSchoolHave                                             String?
  doesTheSchoolUseCharcoalFirewoodOrGas                                             String?
  howManyStudentsEatBreakfastAtTheSchool                                            String?
  howManyStudentsEatLunchAtTheSchool                                                String?
  describeTheMealsTheSchoolProvides                                                 String?
  doesTheSchoolOwnVehiclesToTransportStudentsToSchool                               String?
  howManyVehiclesDoesTheSchoolOwn                                                   String?
  howManyTotalChildrenCanAllOfTheVehiclesFit                                        String?
  howManyChildrenAreTransportedEachDay                                              String?
  doesTheSchoolHaveItsOwnFields                                                     String?
  describeTheFacilities                                                             String?
  howDoesItProvideAccessToFieldsForItsStudents                                      String?
  doesTheSchoolHaveADedicatedScienceLab                                             String?
  whatDoesTheScienceLabContain                                                      String?
  doesTheSchoolHaveALibrary                                                         String?
  howManyBooksDoesTheLibraryContain                                                 String?
  describeTheLibrary                                                                String?
  doesTheSchoolHaveAComputerLab                                                     String?
  howManyWorkingComputersDoesTheComputerLabHave                                     String?
  whatIsTheSchoolMadeOf                                                             String?
  whatAreTheSchoolSFloorsMadeOf                                                     String?
  isTheSchoolBuildingSingleOrMultistory                                             String?
  isTheSchoolBuildingPainted                                                        String?
  doesTheSchoolHaveAfterSchoolPrograms                                              String?
  whatAfterSchoolProgramsDoesTheSchoolHave                                          String?
  describeTheSchoolSWashroomFacilities                                              String?
  howManyGirlsToiletsDoesTheSchoolHave                                              String?
  howManyBoysToiletsDoesTheSchoolHave                                               String?
  howManySharedToiletsDoesTheSchoolHave                                             String?
  byPercentageOfChildrenHowManyChildrenGetSentHomeAtLeastOncePerTermBecauseOfSchoolFees String? @map("byPercentageOfChildrenHowManyChildrenGetSentHomeAtLeastOncePerT")
  whenYouWalkedIntoTheSchoolDescribeWhatYouSaw                                      String?
  doAnyOfTheTeachersAndAdministrationHaveSmartphones                                String?
  howManyTeachersAndAdminsHaveSmartphones                                           String?
  doTheTeachersAndAdministrationHaveComputersPersonallyOrForSchoolWork              String? @map("doTheTeachersAndAdministrationHaveComputersPersonallyOrForSchoo")
  howManyComputersAreThereForTeachersToUseForWorkOrPersonally                       String?
  howManyFemaleChildrenAttendTheSchool                                              Int?
  howManyMaleChildrenAttendTheSchool                                                Int?
  doesTheSchoolHaveTextbooksForStudents                                             String?
  howManyStudentsShareEachTextbook                                                  String?
  isTheSchoolConnectedToASewerLine                                                  String?
  howManyAdditionalStudentsDoesTheDirectorExpectAnyProjectFinancedOrAssetPurchasedUsingTheLoanProvidedByJackfruitWillAddToTheSchoolIfAny String? @map("howManyAdditionalStudentsDoesTheDirectorExpectAnyProjectFinance")
  anyOtherNotesOnTheSchool                                                          String?
  photosAdded                                                                       String?
  isTheSchoolAPartOfASchoolAssociation                                              String?
  whichSchoolAssociation                                                            String?
  doesTheSchoolTakeDailyAttendanceRecords                                           String?
  howManyMaleTeachersDoesTheSchoolsHave                                             Int?
  howManyFemaleTeachersDoesTheSchoolsHave                                           Int?
  howManyTeachersDidTheSchoolHaveLastYear                                           String?
  howManyTeachersDidTheSchoolHaveTwoYearsAgo                                        String?
  whatPercentageOfChildrenTransitionedLastSchoolYearFromPrimarySchoolToSecondarySchool String? @map("whatPercentageOfChildrenTransitionedLastSchoolYearFromPrimarySc")
  whatPercentageOfTeachersFromLastYearCameBackToTeachAgainThisYear                  String? @map("whatPercentageOfTeachersFromLastYearCameBackToTeachAgainThisYea")
  howManyGirlsAttendPlaygroupAtTheSchool                                            String?
  howManyBoysAttendPlaygroupAtTheSchool                                             String?
  howManyGirlsAttendPP1OrPP2AtTheSchool                                             String?
  howManyBoysAttendPP1OrPP2AtTheSchool                                              String?
  howManyGirlsAttendPrimarySchoolAtTheSchool                                        String?
  howManyBoysAttendPrimarySchoolAtTheSchool                                         String?
  howManyGirlsAttendSecondarySchoolAtTheSchool                                      String?
  howManyBoysAttendSecondarySchoolAtTheSchool                                       String?
  howManySpecialNeedsBoysAttendTheSchool                                            Int?
  howManySpecialNeedsGirlsAttendTheSchool                                           Int?
  howManyClassroomsDidTheSchoolHaveLastYear                                         String?
  howManyClasroomsDidTheSchoolHaveTwoYearsAgo                                       String?
  ifTheSchoolIsAPrimarySchoolDoesItHaveAJuniorSecondarySchool                       String?
  doesTheSchoolServeOnlySpecialNeedsStudents                                        String?
  howManyMaleEmployeesWhoAreNotTeachersDoesTheSchoolHave                            String?
  howManyFemaleEmployeesWhoAreNotTeachersDoesTheSchoolHave                          String?
  howManyPlayschoolPP1AndPP2TeachersDoesTheSchoolHave                               String?
  howManyPrimaryTeachersDoesTheSchoolHave                                           String?
  howManySecondaryTeachersDoesTheSchoolHave                                         String?
  approximatelyHowManyTimesAYearDoesTheSchoolTestStudentsInAcademicSubjectsExcludingKPSEAAndKCPE String? @map("approximatelyHowManyTimesAYearDoesTheSchoolTestStudentsInAcadem")
  doesTheSchoolMaintainRecordsOfIndividualPupilTestScores                           String?
  howAreRecordsOfPupilTestScoresStored                                              String?
  doesTheSchoolMaintainRecordsOfStudentAbsences                                     String?
  howAreRecordsOfAbsencesStoredForStudents                                          String?
  doesTheSchoolConductMonitoringOfTeachers                                          String?
  whenTheSchoolConductsMonitoringOfTeachersIsAFormFilledOut                         String?
  howManyTimesAYearDoesTheSchoolConductMonitoringOfAGivenTeacher                    String?
  doesTheSchoolEvaluateThePerformanceOfTeachers                                     String?
  howHowManyTimesPerYearDoesSchoolEvaluateTeachers                                  String?
  whatInformationDoesTheSchoolCollectAndUseToEvaluateThePerformanceOfYourTeachers   String? @map("whatInformationDoesTheSchoolCollectAndUseToEvaluateThePerforman")
  howManyTeachersHaveBeenRemovedForUnsatisfactoryPerformanceInThePast5Years          String? @map("howManyTeachersHaveBeenRemovedForUnsatisfactoryPerformanceInThe")
  doTeachersReceiveMonetaryRewardsForExceptionalPerformanceYesNo                    String?
  isTheSchoolAMemberOfTheKenyaPrivateSchoolAssociation                              String?
  doYouHaveAChildSafeguardingPolicy                                                 String?
  whatDoesYourSchoolDoToObserveChildSafeguarding                                    String?
  synced                                                                             Boolean   @default(false)
  createdAt                                                                          DateTime? @default(now())
  
  @@map("impact_survey")
}

model WriteOff {
  id                                      Int       @id @default(autoincrement())
  sheetId                                 String?   @unique
  date                                    String?
  loanId                                  String?
  paymentScheduleId                       String?
  principalAmountWrittenOff                Float?
  interestAmountWrittenOff                 Float?
  vehicleInsuranceAmountWrittenOff         Float?
  totalAmount                              Float?
  createdAtSheet                          String?
  createdBy                                String?
  region                                   String?
  sslId                                    String?
  loanOrPaymentLevel                       String?
  penaltyAmountWrittenOff                  Float?
  synced                                   Boolean   @default(false)
  createdAt                                DateTime? @default(now())
  
  @@map("write_offs")
}

model Restructuring {
  id                                      Int       @id @default(autoincrement())
  sheetId                                 String?   @unique
  loanId                                  String?
  date                                    DateTime?
  restructuringDate                       String?
  reason                                  String?
  previousLoanTerms                        String?
  newLoanTerms                            String?
  previousPrincipalAmount                  Float?
  newPrincipalAmount                       Float?
  previousInterestRate                    String?
  newInterestRate                         String?
  previousNumberOfMonths                  Int?
  newNumberOfMonths                       Int?
  previousMonthlyPayment                  Float?
  newMonthlyPayment                       Float?
  approvedBy                              String?
  approvalDate                            String?
  createdAtSheet                          String?
  createdBy                               String?
  region                                  String?
  sslId                                   String?
  notes                                   String?
  synced                                  Boolean   @default(false)
  createdAt                               DateTime? @default(now())
  
  @@map("restructurings")
}
